# Add rate limiting in the server block
http {
    # Define a shared memory zone to store the rate-limiting data
    limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;

    server {
        location /process-images/ {
            # Apply the rate limiting
            limit_req zone=one burst=5 nodelay;
            proxy_pass http://backend_image_processing_server;
        }
    }
}


'''
Rate: 1 request per second from each IP.
Burst: Allows short bursts of up to 5 requests to handle temporary spikes.
'''